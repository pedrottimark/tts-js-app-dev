<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'/>
<title>querySelector</title>
<link rel="stylesheet" href="todos.css" />
</head>
<body>
<div id="root">
<section>
<h3><span>Todo list: <span><span id="count"></span><span> uncompleted</span></h3>
<ul id="todos">
<li class="completed">Find elements</li>
<li class="uncompleted">Attach listeners</li>
<li class="uncompleted">Do things</li>
</ul>
</section>
</div>
</body>
<script>
'use strict';

var count = document.querySelector('#count');
var itemsUncompleted = document.getElementsByClassName('uncompleted');

function update() {
  if (count !== null) {
    count.textContent = itemsUncompleted.length;
  }
  console.log('count of uncompleted is now:', itemsUncompleted.length);
}

update(); // initialize

function onClickTodoItem(event) {
  var element = event.target;
  element.className = element.className === 'uncompleted'
    ? 'completed'
    : 'uncompleted';
  console.log('element "', element.textContent, '" is now:', element.className);
  update();
}

var items = document.querySelectorAll('#todos li');
Array.prototype.forEach.call(items, function (item) {
  item.addEventListener('click', onClickTodoItem);
});
</script>
</html>
